(()=>{"use strict";const e=(e,t)=>{e.preventDefault();const o=t.getAttribute("href").substring(1);document.getElementById(o).scrollIntoView({behavior:"smooth",block:"start"})},t=document.querySelector("main > a");t.addEventListener("click",(o=>{e(o,t)}));const o=e;(function(e){const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");let s=!1,c=0;!function r(){const l=function(){const t=(new Date(e).getTime()-(new Date).getTime())/1e3,o=Math.floor(t%60),n=Math.floor(t/60%60);return{timeRemaining:t,hours:Math.floor(t/60/60%24),minutes:n,seconds:o}}();t.textContent=l.hours<10?"0"+l.hours:l.hours,o.textContent=l.minutes<10?"0"+l.minutes:l.minutes,n.textContent=l.seconds<10?"0"+l.seconds:l.seconds,l.timeRemaining>0&&!s?(c=setInterval(r,1e3),s=!0):l.timeRemaining<=0&&(clearInterval(c),s=!1,t.textContent="00",o.textContent="00",n.textContent="00",t.style.color="red",o.style.color="red",n.style.color="red")}()})("May 23, 2021 23:28:00"),(()=>{const e=document.querySelector("menu"),t=()=>{e.classList.toggle("active-menu")};document.body.addEventListener("click",(n=>{let s=n.target;s.closest(".menu")||s.classList.contains("close-btn")?t():s.closest("menu > ul > li > a")?(s=s.closest("menu > ul > li > a"),o(n,s),t()):s.closest("menu")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn");e.style.opacity="0%",t.forEach((t=>{t.addEventListener("click",(()=>{if(screen.width<768)return e.style.opacity="100%",void(e.style.display="block");const t=Date.now();e.style.display="block";const o=setInterval((()=>{const n=Date.now()-t;e.style.opacity=`${(n/3).toFixed(0)}%`,n>=1e3&&clearInterval(o)}),10)}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?(e.style.display="none",e.style.opacity="0%"):(o=o.closest(".popup-content"),o||(e.style.display="none",e.style.opacity="0%"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,s)=>{e===n&&(e=>{for(let n=0;n<t.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(o[n].classList.add("d-none"),t[n].classList.remove("active"))})(s)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content");let n=document.querySelectorAll(".dot");n.forEach((e=>{e.remove()}));for(let o=0;o<e.length;o++){const e=n[0].cloneNode();t.insertAdjacentElement("beforeend",e)}n=document.querySelectorAll(".dot");let s,c=0;const r=(e,t,o)=>{e[t].classList.remove(o)},l=(e,t,o)=>{e[t].classList.add(o)},a=()=>{r(e,c,"portfolio-item-active"),r(n,c,"dot-active"),c++,c>=e.length&&(c=0),l(e,c,"portfolio-item-active"),l(n,c,"dot-active")},i=(e=3e3)=>{s=setInterval(a,e)};o.addEventListener("click",(t=>{t.preventDefault();const o=t.target;o.matches(".portfolio-btn, .dot")&&(r(e,c,"portfolio-item-active"),r(n,c,"dot-active"),o.matches("#arrow-right")?(c++,c>=e.length&&(c=0)):o.matches("#arrow-left")?(c--,c<0&&(c=e.length-1)):o.matches(".dot")&&n.forEach(((e,t)=>{e===o&&(c=t)})),l(e,c,"portfolio-item-active"),l(n,c,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(s)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i(1500)})),i(1500)})(),(()=>{const e=document.querySelectorAll(".command__photo"),t=e=>{const t=e.getAttribute("src"),o=e.dataset.img;e.dataset.img=t,e.setAttribute("src",o)};e.forEach((e=>{e.addEventListener("mouseover",(e=>{t(e.target)})),e.addEventListener("mouseout",(e=>{t(e.target)}))}))})(),document.body.addEventListener("input",(e=>{const t=e.target;if("INPUT"===t.tagName){if(t.classList.contains("calc-item")&&!t.classList.contains("calc-type")){const e=t.value;t.value=e.replace(/\D+/g,"")}"form1-name"!==t.getAttribute("id")&&"form2-name"!==t.getAttribute("id")&&"form3-name"!==t.getAttribute("id")||(e=>{const t=e.value;e.value=t.replace(/[^ А-Яа-я]+/g,"")})(t),"form2-message"===t.getAttribute("id")&&(e=>{const t=e.value;e.value=t.replace(/[^- А-Яа-я\d,.?!:;]+/g,"")})(t),t.classList.contains("form-email")&&(e=>{const t=e.value;e.value=t.replace(/[^-_.!~*'@A-Za-z0-9]+/g,"")})(t),t.classList.contains("form-phone")&&(e=>{const t=e.value;e.value=t.replace(/[^+\d)(]+/g,"")})(t)}})),document.body.addEventListener("focusout",(e=>{const t=e.target;"INPUT"===t.tagName&&((e=>{let t=e.value;t=t.replace(/^[ -]+|[ -]+$/g,""),t=t.replace(/(-+)/g,"-"),t=t.replace(/( +)/g," "),e.value=t})(t),"form1-name"!==t.getAttribute("id")&&"form2-name"!==t.getAttribute("id")&&"form3-name"!==t.getAttribute("id")||(e=>{const t=e.value;e.value=t.substring(0,1).toUpperCase()+t.substring(1).toLowerCase()})(t))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.getElementById("total"),s=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),l=()=>{let t=0,l=1,a=1;const i=+o.options[o.selectedIndex].value,u=+s.value;r.value>1&&(l+=(r.value-1)/10),c.value&&c.value<5?a*=2:c.value&&c.value<10&&(a*=1.5),i&&u&&(t=e*i*u*l*a,t=t.toFixed(2)),n.textContent=t};t.addEventListener("change",(e=>{const t=e.target;t.matches("select")&&(0===t.selectedIndex&&(s.value="",c.value="",r.value=""),l()),t.matches("input")&&l()}))})(100),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),o=document.getElementById("form3"),n=document.createElement("div");n.style.cssText="font-size: 2rem;";const s=e=>{if(e.appendChild(n),n.style.cssText="font-size: 2rem; color: white;",!(e=>{const t=e.querySelectorAll("input");for(let e=0;e<t.length;e++){if(("text"===t[e].type||"form2-message"===t[e].id)&&t[e].value.length<2)return!1;if(!("email"!==t[e].type||/[-_.!~*'A-Za-z0-9]{1,}@{1}[-_.!~*'A-Za-z0-9]{1,}/g.test(t[e].value)&&t[e].value.length>0))return!1;if("tel"===t[e].type){const o=t[e].value.replace(/[+()]+/g,"");if(o.length<7||o.length>11)return!1}}return!0})(e))return n.textContent="Введите данные правильно!",void setTimeout((()=>{n.remove()}),1e3);n.textContent="Загрузка...";const t=new FormData(e),o={};for(const e of t.entries())o[e[0]]=e[1];(e=>fetch("./server.php",{method:"POST",mode:"same-origin",cache:"default",credentials:"same-origin",headers:{"Content-type":"application/json"},redirect:"follow",referrer:"client",body:JSON.stringify(e)}))(o).then((t=>{if(200!==t.status)throw new Error("status network not 200");n.textContent="Спасибо! мы скоро с вами свяжемся!",e.reset(),setTimeout((()=>{n.remove();const t=e.closest(".popup");t&&(t.style.display="none",t.style.opacity="0%")}),1e3)})).catch((t=>{n.textContent="Что-то пошло не так...",console.error(t),e.reset(),setTimeout((()=>{n.remove();const t=e.closest(".popup");t&&(t.style.display="none",t.style.opacity="0%")}),1e3)}))};e.addEventListener("submit",(t=>{t.preventDefault(),s(e)})),t.addEventListener("submit",(e=>{e.preventDefault(),s(t)})),o.addEventListener("submit",(e=>{e.preventDefault(),s(o)}))})()})();